<!DOCTYPE html>
<html lang="en">
<head>
  <title>Photo Selection - TrainingCheck</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    img {
      display: block;
      width: 100vw;       /* Full viewport width */
      height: 80vh;       /* 80% of the viewport height */
      object-fit: contain;
      margin: 20px auto;
    }
    #photoLabel {
      font-weight: bold;
      text-align: center;
      margin-bottom: 10px;
      font-size: 1.2em;
    }
    #ambiguousLabel {
      text-align: center;
      margin-top: 10px;
      font-size: 1.1em;
      font-style: italic;
    }
  </style>
  <script>
    // Delay before saving and redirecting (in milliseconds)
    const trialDelay = 1000;

    // Utility: Shuffle an array in place.
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // Define photo pools and label mappings.
    const ambiguousPhotos = [
      "Stimulireal/horseback.jpg",
      "Stimulireal/donkey.seal.png",
      "Stimulireal/face.vase.png",
      "Stimulireal/frog.horse.jpg",
      "Stimulireal/jastrow.rabbit.jpg",
      "Stimulireal/man.mouse.png",
      "Stimulireal/old.young.png",
      "Stimulireal/woman.man.png",
      "Stimulireal/hug.png",
      "Stimulireal/profile.profile.png"
    ];
    const nonAmbiguousPhotos = [
      "Stimulireal/ur.donkey.seal.jpg",
      "Stimulireal/ur.jastrow.rabbit.jpg",
      "Stimulireal/ur.face.vase.png",
      "Stimulireal/ur.man.mouse.png",
      "Stimulireal/ur.hug.png",
      "Stimulireal/ur.woman.man.png",
      "Stimulireal/ur.old.young.jpg",
      "Stimulireal/ur.frog.horse.png",
      "Stimulireal/ur.horseback.jpg",
      "Stimulireal/ur.profile.profile.jpg"
    ];
    const ambiguousLabels = {
      "Stimulireal/horseback.jpg": "Riding a horse/ a man's face",
      "Stimulireal/donkey.seal.png": "Donkey/ seal",
      "Stimulireal/face.vase.png": "Face/ vase",
      "Stimulireal/frog.horse.jpg": "Frog/ horse",
      "Stimulireal/jastrow.rabbit.jpg": "Duck/ rabbit",
      "Stimulireal/man.mouse.png": "Man/ mouse",
      "Stimulireal/old.young.png": "Old lady/ young lady",
      "Stimulireal/woman.man.png": "Man's face/ woman sitting",
      "Stimulireal/hug.png": "Man's face/ woman's face",
      "Stimulireal/profile.profile.png": "Side view/ front view"
    };
    const nonAmbiguousLabels = {
      "Stimulireal/ur.donkey.seal.jpg": "Fish",
      "Stimulireal/ur.jastrow.rabbit.jpg": "Horse",
      "Stimulireal/ur.face.vase.png": "Jar",
      "Stimulireal/ur.man.mouse.png": "Mouse",
      "Stimulireal/ur.hug.png": "People talking",
      "Stimulireal/ur.woman.man.png": "Face",
      "Stimulireal/ur.old.young.jpg": "Woman",
      "Stimulireal/ur.frog.horse.png": "Bird",
      "Stimulireal/ur.horseback.jpg": "Person walking dog",
      "Stimulireal/ur.profile.profile.jpg": "Front view"
    };

    // Save photo pools i
